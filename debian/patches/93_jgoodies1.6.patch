fix code for libjgoodies-forms-java 1.3->1.6 transition
--- a/freeplane/src/org/freeplane/core/resources/components/OptionPanel.java
+++ b/freeplane/src/org/freeplane/core/resources/components/OptionPanel.java
@@ -50,7 +50,7 @@
 import org.freeplane.features.mode.Controller;
 
 import com.jgoodies.forms.builder.DefaultFormBuilder;
-import com.jgoodies.forms.factories.ButtonBarFactory;
+import com.jgoodies.forms.builder.ButtonBarBuilder;
 import com.jgoodies.forms.layout.FormLayout;
 
 public class OptionPanel {
@@ -99,6 +99,35 @@
 		new OptionPanelBuilder();
 	}
 
+    /**
+     * Builds and returns a right aligned button bar with the given buttons.
+     *
+     * @param buttons  an array of buttons to add
+     * @return a right aligned button bar with the given buttons
+     */
+    public static JPanel buildRightAlignedBar(JButton[] buttons) {
+//        ButtonBarBuilder2 builder = new ButtonBarBuilder2();
+    	ButtonBarBuilder builder = new ButtonBarBuilder();
+        builder.addGlue();
+        builder.addButton(buttons);
+        return builder.getPanel();
+    }
+
+
+	/**
+	 * Builds and returns a button bar with OK and Cancel.
+     *
+     * @param ok		the OK button
+     * @param cancel	the Cancel button
+     * @return a panel that contains the button(s)
+     */
+    public static JPanel buildOKCancelBar(
+            JButton ok, JButton cancel) {
+        return buildRightAlignedBar(new JButton[] {ok, cancel});
+    }
+
+
+
 	public void buildPanel(final DefaultMutableTreeNode controlsTree) {
 		final FormLayout leftLayout = new FormLayout("max(80dlu;p):grow", "");
 		final DefaultFormBuilder leftBuilder = new DefaultFormBuilder(leftLayout);
@@ -157,7 +186,7 @@
 			}
 		});
 		topDialog.getRootPane().setDefaultButton(okButton);
-		topDialog.getContentPane().add(ButtonBarFactory.buildOKCancelBar(cancelButton, okButton), BorderLayout.SOUTH);
+		topDialog.getContentPane().add(buildOKCancelBar(cancelButton, okButton), BorderLayout.SOUTH);
 	}
 	
 	private boolean validate() {
--- a/freeplane/src/org/freeplane/features/styles/mindmapmode/StyleEditorPanel.java
+++ b/freeplane/src/org/freeplane/features/styles/mindmapmode/StyleEditorPanel.java
@@ -747,7 +747,7 @@
 		final String form = "right:max(20dlu;p), 2dlu, p, 1dlu,right:max(20dlu;p), 4dlu, 80dlu, 7dlu";
 		final FormLayout rightLayout = new FormLayout(form, "");
 		final DefaultFormBuilder rightBuilder = new DefaultFormBuilder(rightLayout);
-		rightBuilder.setBorder(Borders.DLU2_BORDER);
+		rightBuilder.border(Borders.DLU2);
 		rightBuilder.appendSeparator(TextUtils.getText("OptionPanel.separator.NodeStyle"));
 		if (addStyleBox) {
 			addAutomaticLayout(rightBuilder);
--- a/freeplane/src/org/freeplane/view/swing/features/time/mindmapmode/TimeManagement.java
+++ b/freeplane/src/org/freeplane/view/swing/features/time/mindmapmode/TimeManagement.java
@@ -78,7 +78,7 @@
 import org.freeplane.features.text.mindmapmode.MTextController;
 
 import com.jgoodies.forms.builder.DefaultFormBuilder;
-import com.jgoodies.forms.factories.FormFactory;
+import com.jgoodies.forms.layout.FormSpecs;
 import com.jgoodies.forms.layout.FormLayout;
 
 /**
@@ -157,11 +157,11 @@
 			calendarContainer.setAlignmentX(0.5f);
 			add(calendarContainer);
 			
-			DefaultFormBuilder btnBuilder = new DefaultFormBuilder(new FormLayout(FormFactory.GROWING_BUTTON_COLSPEC.toString(), ""));
+			DefaultFormBuilder btnBuilder = new DefaultFormBuilder(new FormLayout(FormSpecs.GROWING_BUTTON_COLSPEC.toString(), ""));
 			 btnBuilder.getLayout().addGroupedColumn(btnBuilder.getColumnCount());
 			 for(int i = 1; i< colCount; i++){
 				 btnBuilder.appendRelatedComponentsGapColumn();
-				 btnBuilder.appendColumn(FormFactory.GROWING_BUTTON_COLSPEC);
+				 btnBuilder.appendColumn(FormSpecs.GROWING_BUTTON_COLSPEC);
 				 btnBuilder.getLayout().addGroupedColumn(btnBuilder.getColumnCount());
 			}
 
--- a/freeplane_plugin_script/src/org/freeplane/plugin/script/addons/AddOnDetailsPanel.java
+++ b/freeplane_plugin_script/src/org/freeplane/plugin/script/addons/AddOnDetailsPanel.java
@@ -28,7 +28,7 @@
 import org.freeplane.plugin.script.ExecuteScriptAction;
 import org.freeplane.plugin.script.addons.ScriptAddOnProperties.Script;
 
-import com.jgoodies.forms.factories.FormFactory;
+import com.jgoodies.forms.layout.FormSpecs;
 import com.jgoodies.forms.layout.ColumnSpec;
 import com.jgoodies.forms.layout.FormLayout;
 import com.jgoodies.forms.layout.RowSpec;
@@ -41,16 +41,16 @@
 	public AddOnDetailsPanel(final AddOnProperties addOn, final String warning) {
 		this.warning = warning;
 		setLayout(new FormLayout(new ColumnSpec[] {
-				FormFactory.DEFAULT_COLSPEC,
-				FormFactory.RELATED_GAP_COLSPEC,
+				FormSpecs.DEFAULT_COLSPEC,
+				FormSpecs.RELATED_GAP_COLSPEC,
 				ColumnSpec.decode("default:grow"),},
 			new RowSpec[] {
-				FormFactory.RELATED_GAP_ROWSPEC,
-				FormFactory.DEFAULT_ROWSPEC,
-				FormFactory.RELATED_GAP_ROWSPEC,
-				FormFactory.DEFAULT_ROWSPEC,
-				FormFactory.RELATED_GAP_ROWSPEC,
-				FormFactory.DEFAULT_ROWSPEC,
+				FormSpecs.RELATED_GAP_ROWSPEC,
+				FormSpecs.DEFAULT_ROWSPEC,
+				FormSpecs.RELATED_GAP_ROWSPEC,
+				FormSpecs.DEFAULT_ROWSPEC,
+				FormSpecs.RELATED_GAP_ROWSPEC,
+				FormSpecs.DEFAULT_ROWSPEC,
 				RowSpec.decode("top:default:grow"),}));
 		
 		JLabel imageLabel = createImageLabel(addOn);
--- a/freeplane_plugin_script/src/org/freeplane/plugin/script/addons/AddOnInstallerPanel.java
+++ b/freeplane_plugin_script/src/org/freeplane/plugin/script/addons/AddOnInstallerPanel.java
@@ -43,7 +43,7 @@
 import org.freeplane.plugin.script.ScriptingPermissions;
 
 import com.jgoodies.forms.factories.DefaultComponentFactory;
-import com.jgoodies.forms.factories.FormFactory;
+import com.jgoodies.forms.layout.FormSpecs;
 import com.jgoodies.forms.layout.ColumnSpec;
 import com.jgoodies.forms.layout.FormLayout;
 import com.jgoodies.forms.layout.RowSpec;
@@ -62,17 +62,17 @@
 		setLayout(new FormLayout(new ColumnSpec[] {
 				ColumnSpec.decode("default:grow"),},
 			new RowSpec[] {
-				FormFactory.RELATED_GAP_ROWSPEC,
-				FormFactory.DEFAULT_ROWSPEC,
-				FormFactory.RELATED_GAP_ROWSPEC,
-				FormFactory.DEFAULT_ROWSPEC,
-				FormFactory.RELATED_GAP_ROWSPEC,
-				FormFactory.DEFAULT_ROWSPEC,
-				FormFactory.DEFAULT_ROWSPEC,
-				FormFactory.RELATED_GAP_ROWSPEC,
-				FormFactory.DEFAULT_ROWSPEC,
-				FormFactory.RELATED_GAP_ROWSPEC,
-				FormFactory.DEFAULT_ROWSPEC,}));
+				FormSpecs.RELATED_GAP_ROWSPEC,
+				FormSpecs.DEFAULT_ROWSPEC,
+				FormSpecs.RELATED_GAP_ROWSPEC,
+				FormSpecs.DEFAULT_ROWSPEC,
+				FormSpecs.RELATED_GAP_ROWSPEC,
+				FormSpecs.DEFAULT_ROWSPEC,
+				FormSpecs.DEFAULT_ROWSPEC,
+				FormSpecs.RELATED_GAP_ROWSPEC,
+				FormSpecs.DEFAULT_ROWSPEC,
+				FormSpecs.RELATED_GAP_ROWSPEC,
+				FormSpecs.DEFAULT_ROWSPEC,}));
 		//
 		// Search
 		//
--- a/freeplane/src/org/freeplane/core/resources/components/KeyProperty.java
+++ b/freeplane/src/org/freeplane/core/resources/components/KeyProperty.java
@@ -32,6 +32,7 @@
 
 import com.jgoodies.forms.builder.DefaultFormBuilder;
 import com.jgoodies.forms.layout.RowSpec;
+import com.jgoodies.forms.layout.Sizes;
 
 /**
  * @author Dimitry Polivaev
@@ -77,7 +78,7 @@
 		String tooltip = TextUtils.getOptionalText(getDescription());
 		label.setToolTipText(tooltip);
 		if (KeyProperty.rowSpec == null) {
-			KeyProperty.rowSpec = new RowSpec("fill:20dlu");
+        KeyProperty.rowSpec = new RowSpec(RowSpec.FILL, Sizes.dluX(20), 0.0);
 		}
 		if (3 < builder.getColumn()) {
 			builder.appendRelatedComponentsGapRow();
